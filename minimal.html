<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Idle: Dynasty Builder - Minimal</title>
    <link rel="stylesheet" href="game.css">
</head>
<body>
    <!-- Top Right Icons -->
    <div id="top-right-icons">
        <button id="sound-btn" class="icon-btn" title="Sound">
            <span>üîä</span>
        </button>
        <button id="tutorial-btn" class="icon-btn" title="Tutorial & Help">
            <span>üìö</span>
        </button>
        <button id="quest-btn" class="icon-btn" title="Expeditions & Quests">
            <span>üó∫Ô∏è</span>
        </button>
        <button id="settings-btn" class="icon-btn" title="Settings">
            <span>‚öôÔ∏è</span>
        </button>
        <button id="progress-btn" class="icon-btn progress-incomplete" title="Progression">
            <span id="progress-icon">üèÜ</span>
        </button>
    </div>

    <!-- Game Container -->
    <div id="game-container">
        <nav id="view-navigation">
            <button class="nav-btn active" data-view="village" id="village-tab">Village</button>
            <button class="nav-btn" data-view="battle" id="battle-tab">Battle</button>
            <button class="nav-btn" data-view="monarch" id="monarch-tab">Monarch (LOCKED)</button>
            <button class="nav-btn" data-view="throne" id="throne-tab">Throne</button>
        </nav>
        
        <main id="game-content">
            <!-- Village View -->
            <div id="village-view" class="game-view active">
                <div class="village-header">
                    <h2>Village Management</h2>
                    <div class="resource-panel">
                        <span>Food: <span id="food-count">100</span></span>
                        <span>Wood: <span id="wood-count">50</span></span>
                        <span>Stone: <span id="stone-count">25</span></span>
                        <span>Population: <span id="population-count">10</span></span>
                        <span>Season: <span id="season-count">Spring</span></span>
                    </div>
                </div>
                
                <div class="village-content">
                    <div id="village-grid" class="village-grid">
                        <p style="color: white; padding: 20px;">JavaScript Loading Test - If you see this, HTML/CSS works but JS failed</p>
                    </div>
                    
                    <div class="village-sidebar">
                        <div class="village-info">
                            <h3>Buildings</h3>
                            <p>Loading...</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Minimal Scripts for Testing -->
    <script>
        console.log('[Test] Starting minimal game initialization...');
        
        // Test if basic DOM manipulation works
        try {
            document.getElementById('village-grid').innerHTML = '<p style="color: white; padding: 20px;">‚úÖ JavaScript is working! DOM manipulation successful.</p>';
            console.log('[Test] DOM manipulation successful');
        } catch (error) {
            console.error('[Test] DOM manipulation failed:', error);
        }
        
        // Test if we can load gameState
        console.log('[Test] Attempting to load GameState...');
    </script>
    
    <!-- Load only essential scripts for testing -->
    <script src="../src/gameState.js"></script>
    <script src="../src/village.js"></script>
    
    <script>
        try {
            console.log('[Test] Creating GameState instance...');
            const gameState = new GameState();
            console.log('[Test] GameState created successfully:', gameState);
            
            // Update UI with actual values
            document.getElementById('food-count').textContent = gameState.food;
            document.getElementById('wood-count').textContent = gameState.wood;
            document.getElementById('stone-count').textContent = gameState.stone;
            document.getElementById('population-count').textContent = gameState.population;
            document.getElementById('season-count').textContent = gameState.season;
            
            console.log('[Test] Creating VillageManager...');
            const villageManager = new VillageManager(gameState, null);
            console.log('[Test] VillageManager created successfully:', villageManager);
            
            console.log('[Test] Initializing VillageManager...');
            villageManager.init();
            console.log('[Test] VillageManager initialized successfully');
            
            document.getElementById('village-grid').innerHTML = '<p style="color: white; padding: 20px;">‚úÖ GameState and VillageManager loaded successfully!</p>';
            
        } catch (error) {
            console.error('[Test] Initialization failed:', error);
            document.getElementById('village-grid').innerHTML = '<p style="color: red; padding: 20px;">‚ùå Failed at: ' + error.message + '</p>';
        }
    </script>
</body>
</html>
